@page "/search"
@using MusicApp.Media
@inject SearchService searchService


<div class="searchbar">
    <input class="search-input" @bind="searchQuery" placeholder="search music" />
    <button class="search-button" @onclick="PerformSearch"><i class='bx bx-search'></i></button>
</div>


@if (searchResults != null)
{
    <ul>
    @foreach (var item in searchResults)
        {
            <li>@item.Title - @item.Subtitle</li>
        }
    </ul>
}

@code {
    private string searchQuery;
    private List<MusicItem> searchResults;

    private async Task PerformSearch()
    {
        searchResults = await searchService.Search(searchQuery);

       Console.WriteLine($"Search results: {System.Text.Json.JsonSerializer.Serialize(searchResults)}");
    }
}

<style>

.searchbar{
    display: grid;
}

.search-input {
    border: 1px solid #ccc;
    padding: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 20px;
    padding-left: 30px;
    font-size: 12px;
}


.search-button {
  background-color: transparent;
  color: #000;
  padding: 10px;
  cursor: pointer;
  border: none;
  position: absolute;
  align-self: start;
  justify-self: start;
  margin-top: -11px;
}

.search-button .bx {
  font-size: 16px;
}


</style>
